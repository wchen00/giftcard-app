!function(e,a){"function"==typeof define&&define.amd?define(["cldr","../globalize","./number","cldr/event","cldr/supplemental"],a):"object"==typeof exports?module.exports=a(require("cldrjs"),require("globalize")):a(e.Cldr,e.Globalize)}(this,function(e,a){function r(e,a){m(e,a,{skip:[/dates\/calendars\/gregorian\/days\/.*\/short/,/supplemental\/timeData\/(?!001)/,/supplemental\/weekData\/(?!001)/]})}var t=a._createError,u=a._createErrorUnsupportedFeature,s=a._formatMessage,n=a._isPlainObject,o=a._numberSymbol,c=a._regexpEscape,i=a._stringPad,m=a._validateCldr,l=a._validateDefaultLocale,D=a._validateParameterPresence,d=a._validateParameterType,f=a._validateParameterTypeString,g=function(e,a){d(e,a,void 0===e||e instanceof Date,"Date")},p=function(e,a){d(e,a,void 0===e||"string"==typeof e||n(e),"String or plain Object")},b=function(e,a){return t("E_INVALID_PAR_VALUE","Invalid `{name}` value ({value}).",{name:e,value:a})},F=function(e,a){var r;switch("string"==typeof e&&(e={skeleton:e}),!0){case"skeleton"in e:r=a.main(["dates/calendars/gregorian/dateTimeFormats/availableFormats",e.skeleton]);break;case"date"in e:case"time"in e:r=a.main(["dates/calendars/gregorian","date"in e?"dateFormats":"timeFormats",e.date||e.time]);break;case"datetime"in e:r=a.main(["dates/calendars/gregorian/dateTimeFormats",e.datetime]),r&&(r=s(r,[a.main(["dates/calendars/gregorian/timeFormats",e.datetime]),a.main(["dates/calendars/gregorian/dateFormats",e.datetime])]));break;case"pattern"in e:r=e.pattern;break;default:throw b({name:"pattern",value:e})}return r},h=function(e,a){return(e.getDay()-a+7)%7},k=function(e,a){var r=864e5;return(a.getTime()-e.getTime())/r},v=function(e,a){switch(e=new Date(e.getTime()),a){case"year":e.setMonth(0);case"month":e.setDate(1);case"day":e.setHours(0);case"hour":e.setMinutes(0);case"minute":e.setSeconds(0);case"second":e.setMilliseconds(0)}return e},y=function(e){return Math.floor(k(v(e,"year"),e))},E=["sun","mon","tue","wed","thu","fri","sat"],w=function(e){return E.indexOf(e.supplemental.weekData.firstDay())},A=function(e){return e-v(e,"day")},H=/([a-z])\1*|'([^']|'')+'|''|./gi,C=function(e,a,r,t){var u,s=e.getTimezoneOffset();return u=Math.abs(s),t=t||{1:function(e){return i(e,1)},2:function(e){return i(e,2)}},a.split(";")[s>0?1:0].replace(":",r).replace(/HH?/,function(e){return t[e.length](Math.floor(u/60))}).replace(/mm/,function(){return t[2](u%60)})},M=function(e,a){var r=a.formatNumber,t=a.timeSeparator;return a.pattern.replace(H,function(u){var s,n=u.charAt(0),o=u.length;switch("j"===n&&(n=a.preferredTime),"Z"===n&&(4>o?(n="x",o=4):5>o?(n="O",o=4):(n="X",o=5)),n){case"G":s=a.eras[e.getFullYear()<0?0:1];break;case"y":s=e.getFullYear(),2===o&&(s=String(s),s=+s.substr(s.length-2));break;case"Y":s=new Date(e.getTime()),s.setDate(s.getDate()+7-h(e,a.firstDay)-a.firstDay-a.minDays),s=s.getFullYear(),2===o&&(s=String(s),s=+s.substr(s.length-2));break;case"Q":case"q":s=Math.ceil((e.getMonth()+1)/3),o>2&&(s=a.quarters[n][o][s]);break;case"M":case"L":s=e.getMonth()+1,o>2&&(s=a.months[n][o][s]);break;case"w":s=h(v(e,"year"),a.firstDay),s=Math.ceil((y(e)+s)/7)-(7-s>=a.minDays?0:1);break;case"W":s=h(v(e,"month"),a.firstDay),s=Math.ceil((e.getDate()+s)/7)-(7-s>=a.minDays?0:1);break;case"d":s=e.getDate();break;case"D":s=y(e)+1;break;case"F":s=Math.floor(e.getDate()/7)+1;break;case"e":case"c":if(2>=o){s=h(e,a.firstDay)+1;break}case"E":s=E[e.getDay()],s=a.days[n][o][s];break;case"a":s=a.dayPeriods[e.getHours()<12?"am":"pm"];break;case"h":s=e.getHours()%12||12;break;case"H":s=e.getHours();break;case"K":s=e.getHours()%12;break;case"k":s=e.getHours()||24;break;case"m":s=e.getMinutes();break;case"s":s=e.getSeconds();break;case"S":s=Math.round(e.getMilliseconds()*Math.pow(10,o-3));break;case"A":s=Math.round(A(e)*Math.pow(10,o-3));break;case"z":case"O":0===e.getTimezoneOffset()?s=a.gmtZeroFormat:(s=C(e,4>o?"+H;-H":a.tzLongHourFormat,t,r),s=a.gmtFormat.replace(/\{0\}/,s));break;case"X":if(0===e.getTimezoneOffset()){s="Z";break}case"x":s=1===o?"+HH;-HH":o%2?"+HH:mm;-HH:mm":"+HHmm;-HHmm",s=C(e,s,":");break;case":":s=t;break;case"'":u=u.replace(/''/,"'"),o>2&&(u=u.slice(1,-1)),s=u;break;default:s=u}return"number"==typeof s&&(s=r[o](s)),s})},x=function(e,a){function r(e){t.formatNumber||(t.formatNumber={}),t.formatNumber[e]=i("",e)}var t={pattern:e,timeSeparator:o("timeSeparator",a)},s=["abbreviated","wide","narrow"];return e.replace(H,function(e){var n,o=e.charAt(0),c=e.length;switch("j"===o&&(t.preferredTime=o=a.supplemental.timeData.preferred()),"Z"===o&&4===c&&(o="O",c=4),o){case"G":t.eras=a.main(["dates/calendars/gregorian/eras",3>=c?"eraAbbr":4===c?"eraNames":"eraNarrow"]);break;case"y":n=!0;break;case"Y":t.firstDay=w(a),t.minDays=a.supplemental.weekData.minDays(),n=!0;break;case"u":case"U":throw u({feature:"year pattern `"+o+"`"});case"Q":case"q":c>2?(t.quarters||(t.quarters={}),t.quarters[o]||(t.quarters[o]={}),t.quarters[o][c]=a.main(["dates/calendars/gregorian/quarters","Q"===o?"format":"stand-alone",s[c-3]])):n=!0;break;case"M":case"L":c>2?(t.months||(t.months={}),t.months[o]||(t.months[o]={}),t.months[o][c]=a.main(["dates/calendars/gregorian/months","M"===o?"format":"stand-alone",s[c-3]])):n=!0;break;case"w":case"W":t.firstDay=w(a),t.minDays=a.supplemental.weekData.minDays(),n=!0;break;case"d":case"D":case"F":n=!0;break;case"g":throw u({feature:"Julian day pattern `g`"});case"e":case"c":if(2>=c){t.firstDay=w(a),n=!0;break}case"E":t.days||(t.days={}),t.days[o]||(t.days[o]={}),t.days[o][c]=6===c?a.main(["dates/calendars/gregorian/days","c"===o?"stand-alone":"format","short"])||a.main(["dates/calendars/gregorian/days","c"===o?"stand-alone":"format","abbreviated"]):a.main(["dates/calendars/gregorian/days","c"===o?"stand-alone":"format",s[3>c?0:c-3]]);break;case"a":t.dayPeriods=a.main("dates/calendars/gregorian/dayPeriods/format/wide");break;case"h":case"H":case"K":case"k":case"m":case"s":case"S":case"A":n=!0;break;case"z":case"O":t.gmtFormat=a.main("dates/timeZoneNames/gmtFormat"),t.gmtZeroFormat=a.main("dates/timeZoneNames/gmtZeroFormat"),t.tzLongHourFormat=a.main("dates/timeZoneNames/hourFormat");case"Z":case"X":case"x":r(1),r(2);break;case"v":case"V":throw u({feature:"timezone pattern `"+o+"`"})}n&&r(c)}),t},B=function(e){return 1===new Date(e,1,29).getMonth()},N=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},Z=function(e,a){var r=new Date(e.getFullYear(),e.getMonth()+1,0).getDate();e.setDate(1>a?1:r>a?a:r)},S=function(e,a){var r=e.getDate();e.setDate(1),e.setMonth(a),Z(e,r)},z=function(e,a,r){return a>e||e>r},q=function(e,a,r){var t,s,n,o,c,i,m,l,D=0,d=1,f=2,g=3,p=4,b=5,F=6,h=new Date,k=[],y=["year","month","day","hour","minute","second","milliseconds"];if(!a.length)return null;if(l=a.every(function(e){var a,l,v,y;if("literal"===e.type)return!0;switch(l=e.type.charAt(0),y=e.type.length,"j"===l&&(l=r.preferredTimeData),l){case"G":k.push(D),o=+e.value;break;case"y":if(v=e.value,2===y){if(z(v,0,99))return!1;a=100*Math.floor(h.getFullYear()/100),v+=a,v>h.getFullYear()+20&&(v-=100)}h.setFullYear(v),k.push(D);break;case"Y":throw u({feature:"year pattern `"+l+"`"});case"Q":case"q":break;case"M":case"L":if(v=2>=y?e.value:+e.value,z(v,1,12))return!1;S(h,v-1),k.push(d);break;case"w":case"W":break;case"d":s=e.value,k.push(f);break;case"D":n=e.value,k.push(f);break;case"F":break;case"e":case"c":case"E":break;case"a":t=e.value;break;case"h":if(v=e.value,z(v,1,12))return!1;c=i=!0,h.setHours(12===v?0:v),k.push(g);break;case"K":if(v=e.value,z(v,0,11))return!1;c=i=!0,h.setHours(v),k.push(g);break;case"k":if(v=e.value,z(v,1,24))return!1;c=!0,h.setHours(24===v?0:v),k.push(g);break;case"H":if(v=e.value,z(v,0,23))return!1;c=!0,h.setHours(v),k.push(g);break;case"m":if(v=e.value,z(v,0,59))return!1;h.setMinutes(v),k.push(p);break;case"s":if(v=e.value,z(v,0,59))return!1;h.setSeconds(v),k.push(b);break;case"A":h.setHours(0),h.setMinutes(0),h.setSeconds(0);case"S":v=Math.round(e.value*Math.pow(10,3-y)),h.setMilliseconds(v),k.push(F);break;case"Z":case"z":case"O":case"X":case"x":m=e.value-h.getTimezoneOffset()}return!0}),!l)return null;if(c&&!(!t^i))return null;if(0===o&&h.setFullYear(-1*h.getFullYear()+1),void 0!==s){if(z(s,1,N(h)))return null;h.setDate(s)}else if(void 0!==n){if(z(n,1,B(h.getFullYear())?366:365))return null;h.setMonth(0),h.setDate(n)}return i&&"pm"===t&&h.setHours(h.getHours()+12),m&&h.setMinutes(h.getMinutes()+m),k=Math.max.apply(null,k),h=v(h,y[k])},O=function(e){return{preferredTimeData:e.supplemental.timeData.preferred()}},P=/[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D66-\u0D75\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDD16-\uDD1B\uDE40-\uDE47\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDE60-\uDE7E]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9]|\uD806[\uDCE0-\uDCF2]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD834[\uDF60-\uDF71]|\uD835[\uDFCE-\uDFFF]|\uD83A[\uDCC7-\uDCCF]|\uD83C[\uDD00-\uDD0C]/,T=function(e,a){var r,t=a.parseNumber,u=a.timeSeparator,s=[],n=["abbreviated","wide","narrow"];return r=a.pattern.match(H).every(function(r){function o(a,r){var t=e.match(a);return r=r||function(e){return+e},t?(F.value=t.length<8?60*(t[1]?-r(t[1]):r(t[4])):60*(t[1]?-r(t[1]):r(t[7]))+(t[1]?-r(t[4]):r(t[10])),!0):!1}function i(e,a,r){var t;return a||(a="{0}"),t=e.replace("+","\\+").replace(/HH|mm/g,"(("+P.source+")("+P.source+"))").replace(/H|m/g,"(("+P.source+")("+P.source+")?)"),r&&(t=t.replace(/:/g,r)),t=t.split(";").map(function(e){return a.replace("{0}",e)}).join("|"),new RegExp(t)}function m(){return 1===g?(p=!0,b=P):void 0}function l(){return 1===g?(p=!0,b=new RegExp("("+P.source+")("+P.source+")?")):void 0}function D(){return 2===g?(p=!0,b=new RegExp("("+P.source+")("+P.source+")")):void 0}function d(r){var t,u,s=a[r.join("/")];for(t in s)if(u=new RegExp("^"+s[t]),u.test(e))return F.value=t,b=new RegExp(s[t]);return null}var f,g,p,b,F={};switch(F.type=r,f=r.charAt(0),g=r.length,"Z"===f&&(4>g?(f="x",g=4):5>g?(f="O",g=4):(f="X",g=5)),f){case"G":d(["gregorian/eras",3>=g?"eraAbbr":4===g?"eraNames":"eraNarrow"]);break;case"y":case"Y":p=!0,b=new RegExp(1===g?"("+P.source+")+":2===g?"("+P.source+")("+P.source+")":"("+P.source+"){"+g+",}");break;case"Q":case"q":m()||D()||d(["gregorian/quarters","Q"===f?"format":"stand-alone",n[g-3]]);break;case"M":case"L":l()||D()||d(["gregorian/months","M"===f?"format":"stand-alone",n[g-3]]);break;case"D":3>=g&&(p=!0,b=new RegExp("("+P.source+"){"+g+",3}"));break;case"W":case"F":m();break;case"e":case"c":if(2>=g){m()||D();break}case"E":6===g?d(["gregorian/days",["c"===f?"stand-alone":"format"],"short"])||d(["gregorian/days",["c"===f?"stand-alone":"format"],"abbreviated"]):d(["gregorian/days",["c"===f?"stand-alone":"format"],n[3>g?0:g-3]]);break;case"a":d(["gregorian/dayPeriods/format/wide"]);break;case"w":case"d":case"h":case"H":case"K":case"k":case"j":case"m":case"s":l()||D();break;case"S":p=!0,b=new RegExp("("+P.source+"){"+g+"}");break;case"A":p=!0,b=new RegExp("("+P.source+"){"+(g+5)+"}");break;case"z":case"O":if(e===a["timeZoneNames/gmtZeroFormat"])F.value=0,b=new RegExp(a["timeZoneNames/gmtZeroFormat"]);else if(b=i(4>g?"+H;-H":a["timeZoneNames/hourFormat"],a["timeZoneNames/gmtFormat"],u),!o(b,t))return null;break;case"X":if("Z"===e){F.value=0,b=/Z/;break}case"x":if(b=i(1===g?"+HH;-HH":g%2?"+HH:mm;-HH:mm":"+HHmm;-HHmm"),!o(b))return null;break;case"'":F.type="literal",r=r.replace(/''/,"'"),g>2&&(r=r.slice(1,-1)),b=new RegExp(c(r));break;default:F.type="literal",b=/./}return b?(e=e.replace(new RegExp("^"+b.source),function(e){return F.lexeme=e,p&&(F.value=t(e)),""}),F.lexeme?(s.push(F),!0):!1):!1}),r?s:[]},Y=function(e,a){function r(e,a){t[e.replace(/^.*\/dates\//,"").replace(/calendars\//,"")]=a}var t={pattern:e,timeSeparator:o("timeSeparator",a)},s=["abbreviated","wide","narrow"];return a.on("get",r),e.match(H).forEach(function(e){var r,t;switch(r=e.charAt(0),t=e.length,"Z"===r&&5>t&&(r="O",t=4),r){case"G":a.main(["dates/calendars/gregorian/eras",3>=t?"eraAbbr":4===t?"eraNames":"eraNarrow"]);break;case"u":case"U":throw u({feature:"year pattern `"+r+"`"});case"Q":case"q":t>2&&a.main(["dates/calendars/gregorian/quarters","Q"===r?"format":"stand-alone",s[t-3]]);break;case"M":case"L":t>2&&a.main(["dates/calendars/gregorian/months","M"===r?"format":"stand-alone",s[t-3]]);break;case"g":throw u({feature:"Julian day pattern `g`"});case"e":case"c":if(2>=t)break;case"E":6===t?a.main(["dates/calendars/gregorian/days",["c"===r?"stand-alone":"format"],"short"])||a.main(["dates/calendars/gregorian/days",["c"===r?"stand-alone":"format"],"abbreviated"]):a.main(["dates/calendars/gregorian/days",["c"===r?"stand-alone":"format"],s[3>t?0:t-3]]);break;case"a":a.main(["dates/calendars/gregorian/dayPeriods/format/wide"]);break;case"z":case"O":a.main("dates/timeZoneNames/gmtFormat"),a.main("dates/timeZoneNames/gmtZeroFormat"),a.main("dates/timeZoneNames/hourFormat");break;case"v":case"V":throw u({feature:"timezone pattern `"+r+"`"})}}),a.off("get",r),t};return a.dateFormatter=a.prototype.dateFormatter=function(e){var a,t,u,s;D(e,"pattern"),p(e,"pattern"),a=this.cldr,l(a),a.on("get",r),e=F(e,a),s=x(e,a),a.off("get",r),t=s.formatNumber;for(u in t)t[u]=this.numberFormatter({pattern:t[u]});return s.formatNumber=t,function(e){return D(e,"value"),g(e,"value"),M(e,s)}},a.dateParser=a.prototype.dateParser=function(e){var a,t,u;return D(e,"pattern"),p(e,"pattern"),a=this.cldr,l(a),a.on("get",r),e=F(e,a),u=Y(e,a),t=O(a),a.off("get",r),u.parseNumber=this.numberParser({pattern:"0"}),function(e){var a;return D(e,"value"),f(e,"value"),a=T(e,u),q(e,a,t)||null}},a.formatDate=a.prototype.formatDate=function(e,a){return D(e,"value"),g(e,"value"),this.dateFormatter(a)(e)},a.parseDate=a.prototype.parseDate=function(e,a){return D(e,"value"),f(e,"value"),this.dateParser(a)(e)},a});